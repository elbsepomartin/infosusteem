<html>
<head>
    <meta charset="UTF-8" />
    <title>Infos√ºsteem</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>

<div class="container m-5">
    <div class="mb-4">
        <a href="/"><button class="btn btn-primary">Tagasi</button></a>
    </div>

    <div class="col-md-9">
        <form>

            <div class="md-form mb-0">
                <label for="name">Nimi</label>
                <input type="text" id="name" name="name" class="form-control">
            </div>

            <div class="md-form mb-0">
                <label for="name">Kood-nimi</label>
                <input type="text" id="secret_code" name="secret_code" class="form-control">
            </div>

            <div class="md-form mb-0">
                <label for="number">Telefoninumber</label>
                <input type="number" id="phone_number" name="phone_number" class="form-control">
            </div>

            <div class="mt-3">
                <button type="submit" id="submit" class="btn btn-success">Lisa</button>
            </div>

        </form>
    </div>
</div>

<script>
    const submitButton = document.getElementById('submit');

    submitButton.addEventListener('click', function() {

        const name = document.getElementById('name').value;
        const secret_code = document.getElementById('secret_code').value;
        const phoneNumberToInt = document.getElementById('phone_number').value;
        const phone_number = parseInt(phoneNumberToInt);

        fetch('/api/addContact', {
            method: 'POST',
            headers: {
                'Accept': 'application/json, text/plain, */*',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                name: name,
                secret_code: secret_code,
                phone_number: phone_number
            })
        })

        alert("Salvestatud andmebaasi!");
    })
</script>

</body>
</html>